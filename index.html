<head>
<script src="https://code.jquery.com/jquery-2.1.3.min.js">
</script>
</head>

<body style="">
<script src="disco.js"></script>
<pre style="font-size:20px">

queue = [];


var playfreq = function(f,i) {
    var voice = new Voice(f);
    queue.push({interval:i, voice: voice});
};


var play = function () {
    lasttime = window.lasttime || new Date; 
    setInterval(function(){
	    if (queue.length) {
		var interval = queue[0].interval;
		var voice = queue[0].voice;

		if (new Date - lasttime >= interval - 50) {
		    window.lastvoice && lastvoice.stop();
		}

		if (new Date - lasttime >= interval) {
		    voice.start();

		    queue = queue.splice(1);
		    lasttime = new Date();
		    lastvoice = voice;
		}
	    }
	    else {
		lastvoice.stop();
	    }
	}, 10);
};

for (var h = 0; h < 3; h++) {
    for (var j = 0; j < 10; j++) {
	for (var i = 0; i < 13; i++) {
	    if (i === 1) {
		playfreq(100 + i * 50, 500 + j * 5);   
	    }
	    else {
		playfreq(100 + i * 50, 100 + j * 5);   
	    }
	}
	play();
    }
}</pre>
 
</body>
